---
permalink: /
layout: javascripted
background_image: swing_feet.webp
previous_page: /events
next_page: /upcoming-events
---


<div class="flex-centered-column-gapped">
  <span>Updated {{ site.data.database.last_updated | date_to_long_string: "ordinal", "US" }}</span>
  <a href="/dancers">{{ site.data.database.dancers_count }} Dancers</a>
  <a href="/events">{{ site.data.database.events_count }} Events</a>
  <a href="/about">About Us</a>

  <div class="favorite-dancers"></div>

  <div>
    <a target="_blank" href="https://play.google.com/store/apps/details?id=dev.mechstack.wsdc.twa">
      <img alt="Get it on Google Play"
          src="./assets/icons/getItOnGooglePlay.svg" width="270" height="80" />
    </a>
  </div>
  <div>
    <a target="_blank" href="https://app.swingdancer.net/">Swingdancer Website - An alternative to the Swingdancer app</a>
  </div>

</div>

<script>

  const main = async () => {
    const favoriteDancers = getFavoriteDancers();
    if (favoriteDancers.length < 1) return;
    const div = document.querySelector('.favorite-dancers');
    div.innerHTML = "<h3>Starred Dancers <small>Placed in the last 90 days</small></h3>";
    Promise.all(favoriteDancers.map(dancer_id => getDancer(dancer_id)))
      .then(dancers => {
        const minDate = new Date(Date.now() - 90 * 24 * 60 * 60 * 1000); // 90 days in the past
        dancers = dancers.filter(x => (new Date(b.placements[0].date)) >= minDate);
        dancers.sort(function(a, b) { return (new Date(b.placements[0].date)) - (new Date(a.placements[0].date)); });
        dancers.forEach(dancer => {
          const mostRecent = new Date(dancer.placements[0].date);
          const recency = new Date();
          recency.setDate(recency.getDate() - 30);
          div.innerHTML += `<div class="${mostRecent >= recency ? "recent-placement" : ""}"><a href="/dancer#${dancer.id}">${dancer.name}</a> last placed ${mostRecent.toLocaleDateString(undefined, {timeZone: 'UTC', month: 'long', year: 'numeric'})}</div>`;
        })
      });

  };
  main();
</script>
