---
permalink: /upcoming-events
layout: default
background_image: swingfling.jpg
previous_page: /
next_page: /dancers-on-the-rise
---

<h3>Upcoming events</h3>
<h5>
  <a target="_blank" href="webcal://wsdc.mechstack.dev/wsdc_events.ics">Subscribe (may not work on all devices)</a>
  -
  <button onclick='navigator.clipboard.writeText("https://wsdc.mechstack.dev/wsdc_events.ics"); this.innerHTML = "Copied!";'>Copy Calendar URL</button>
</h5>

<script src="lib/list.min.js"></script>

<div id="listcontainer">

  <input type="search" class="search" placeholder="Search" autofocus="autofocus" />

  <ul class="list"></ul>

</div>

<script>
  const events = [
{% for event in site.data.database.upcoming_events %}
{
url: "{{event.url | smartify | normalize_whitespace}}",
name: "{{event.name | smartify | normalize_whitespace }}",
location: "{{event.location | smartify | normalize_whitespace }}",
start_date: '{{ event.start_date | date_to_long_string: "ordinal", "US" }}',
end_date: '{{ event.end_date | date_to_long_string: "ordinal", "US" }}',
latitude: {{ event.latitude | default: 'null' }},
longitude: {{ event.longitude | default: 'null' }},
distance: 0,
},
{% endfor %}
  ];

  let listObject = null;
  let userLocation = null;
  let isMetric = false;

  const sortByDistance = async () => {
    // TODO get user position, estimated or exact
    // TODO update .distance in events
    // TODO force rerender
  };

  const getDistanceString = (eventDistance) => {
    if (eventDistance < 1) return "";
    if (isMetric) return `(${eventDistance} Km)`;
    return `(${eventDistance * 0.621371} miles)`;
  };

  const main = async () => {

    const options = {
      page: 1000,
      indexAsync: true,
      searchColumns: [
        "name",
        "location",
        "start_date",
      ],
      valueNames: [
        "name",
        "location",
        "url",
        "start_date",
        "end_date",
        "distance",
      ],
      item: (event) => `
        <li>
          <h4>
            ${event.name}
          </h4>
          <h6>
            ${event.start_date} - ${event.end_date}
          </h6>
          <div>
            <a target="_blank" href="${event.url}">${event.url}</a>
          </div>
          <div>${event.location} ${getDistanceString(event.distance)}</div>
        </li>
      `,
    };

    listObject = new List('listcontainer', options, events);
  };
  main();
</script>
